<!--
Copyright IBM Corp. 2020, 2024

This source code is licensed under the Apache-2.0 license found in the
LICENSE file in the root directory of this source tree.
-->

<html>
<head>
  <title>Carbon Web Components with Adopted Stylesheets</title>
  <meta charset="UTF-8"/>

  <!-- Shared styles (load once, used by all components) -->
  <link rel="stylesheet"
        href="https://1.www.s81c.com/common/carbon/web-components/tag/v2/latest/shared-styles.css"
        data-carbon-shared="true" />

  <!-- Component-specific styles (much smaller now) -->
  <link rel="stylesheet"
        href="https://1.www.s81c.com/common/carbon/web-components/tag/v2/latest/button-styles.css" />

  <!-- Component JavaScript (much smaller now, no embedded styles) -->
  <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/v2/latest/button.min.js"></script>

  <style>
    /* Suppress custom element until styles are loaded */
    cds-button:not(:defined) {
      display: none;
    }

    /* Demo styles */
    body {
      font-family: 'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;
      padding: 2rem;
      background: var(--cds-background);
      color: var(--cds-text-primary);
    }

    .demo-section {
      margin-bottom: 2rem;
      padding: 1rem;
      border: 1px solid var(--cds-border-subtle);
      border-radius: 4px;
    }

    .demo-section h3 {
      margin-top: 0;
      margin-bottom: 1rem;
    }

    .button-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
  </style>
</head>
<body class="cds-theme-zone-white">
  <h1>Carbon Web Components with Adopted Stylesheets</h1>

  <div class="demo-section">
    <h3>Button Components</h3>
    <div class="button-group">
      <cds-button kind="primary">Primary Button</cds-button>
      <cds-button kind="secondary">Secondary Button</cds-button>
      <cds-button kind="tertiary">Tertiary Button</cds-button>
      <cds-button kind="ghost">Ghost Button</cds-button>
      <cds-button kind="danger">Danger Button</cds-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>Performance Benefits</h3>
    <p>With adopted stylesheets:</p>
    <ul>
      <li><strong>Shared styles</strong> (~150KB) are loaded once and cached</li>
      <li><strong>Component styles</strong> (~5-10KB each) are small and load in parallel</li>
      <li><strong>Component JavaScript</strong> (~20-30KB each) is much smaller without embedded styles</li>
      <li><strong>Total size reduction</strong>: ~80% for multiple components</li>
      <li><strong>Better caching</strong>: Shared styles cached once, reused across all components</li>
    </ul>
  </div>

  <script>
    // Optional: Log performance metrics
    window.addEventListener('load', () => {
      const perfData = performance.getEntriesByType('navigation')[0];
      console.log('Page load time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');

      // Log adopted stylesheets info
      const sharedLinks = document.querySelectorAll('link[data-carbon-shared="true"]');
      console.log('Shared stylesheets loaded:', sharedLinks.length);

      // Check if components are using adopted stylesheets
      const buttons = document.querySelectorAll('cds-button');
      buttons.forEach((button, index) => {
        if (button.shadowRoot && button.shadowRoot.adoptedStyleSheets) {
          console.log(`Button ${index + 1} adopted stylesheets:`, button.shadowRoot.adoptedStyleSheets.length);
        }
      });
    });
  </script>
</body>
</html>
